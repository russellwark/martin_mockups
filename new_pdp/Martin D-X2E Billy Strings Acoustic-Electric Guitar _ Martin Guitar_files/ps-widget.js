if(!PriceSpider || !PriceSpider["accountId"]){var PriceSpider=function(e){"use strict";const n=p(),t=u("ps-trace",!1),o=["widget","recipe","wtb4"],r=e=>{const n=e.filter(e=>o.indexOf(e)>=0);return n.length?n:["widget"]};function i(){const e=d("ps-library");if(e)return r(e.split(",").map(e=>e.trim()));const n=a("ps-library");return n?r(n.split(",").map(e=>e.trim())):["widget"]}function c(e,n,t){const o=`${"widget"===e?"":e+"/"}${n}`;return t?`${o}/debug/ps-${e}.js`:`${o}/ps-${e}.js`}function s(){const e=document.getElementsByTagName("script");for(let n=0;n<e.length;++n){const t=e[n];if(t.src.indexOf("ps-widget")>=0||t.src.indexOf("ps-loader")>=0)return t.src.substr(0,t.src.lastIndexOf("/")+1)}}function a(e){const n=document.getElementsByTagName("script");for(let t=0;t<n.length;++t){const o=n[t];if(o.src.indexOf("ps-widget")>=0||o.src.indexOf("ps-loader")>=0)return o.getAttribute("data-"+e)||o.getAttribute(e)}}function d(e){const n=document.head.getElementsByTagName("meta");for(let t=0;t<n.length;++t){const o=n[t];if(o.getAttribute("name")===e)return o.getAttribute("content")}}function l(e,t){return d(e)||n[e]||t}function u(e,n=!1){const t=l(e);if(t){const e=f(t);if(void 0!==e)return e}return n}function p(e=!0,n=!0){const t={},o=e=>{new URLSearchParams(e).forEach((function(e,n){let o=decodeURIComponent(e);""===e&&(o="true"),t[n]=o}))};return e&&window.location.search.length>1&&o(window.location.search),n&&window.location.hash&&o(window.location.hash),t}function f(e){return"true"===(e=e.toLowerCase())||"yes"===e||"false"!==e&&"no"!==e&&void 0}function g(e,n){const t=document.createElement("script");return t.src=e,t.type="text/javascript",t.charset="UTF-8",function(e,n,t){void 0===n.readyState?(n.onload=()=>t(null,null),n.onerror=()=>t(function(e){const n=new Error("Not found");return n.name="LibraryLoader.loadScript",n.url=e,n.status=404,n}(e),null)):n.onreadystatechange=()=>{"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t(null,null))};document.body?document.body.appendChild(n):document.head.appendChild(n);return v("GET",e),n}(e,t,n)}function v(...e){t&&console.log(...e)}function b(...e){t&&console.error(...e)}var m=Object.freeze({__proto__:null,params:n,traceEnabled:t,ensureValidLibrary:r,resolveLibraries:i,buildLibraryPath:c,getCodebaseUrl:s,getScriptParam:a,getMetaParam:d,getParam:l,getParamBoolean:u,getUrlParams:p,parseBoolean:f,parseUrlParams:function(e,n){for(const t of e){const e=t.indexOf("="),o=e>=0?t.substr(0,e):t,r=e>=0?t.substr(e+1):void 0;o in n||"function"==typeof o?n[o]instanceof Array?n[o].push(r):n[o]=[n[o],r]:n[o]=r}},loadScript:g,trace:v,error:b});let w,h;function y(e,n){h=n,w=g(e,e=>{e&&n(e,null)})}function E(e,n){const t=h;w&&w.parentElement.removeChild(w),w=void 0,h=void 0,t&&t(null,n)}var S=Object.freeze({__proto__:null,get element(){return w},get handler(){return h},load:y,onload:E});let P;e.account=void 0,e.version=void 0,e.versions=void 0;const L=u("ps-debug",!1),O="https://cdn.pricespider.com/1/",$=s()||O+"lib/",_=parseInt(d("ps-key"))||parseInt(d("ps-account"))||parseInt(a("ps-account")),x=i();function A(){_?(v("ps-account="+_),function(n,t){y(`${O}${n}/config.js`,(o,r)=>{o||(e.account=r,e.account.id=n,e.account.version||(e.account.version=null),e.account.configs||(e.account.configs=[]),e.account.versions||(e.account.versions={widget:null,recipe:null,wtb4:null})),t(o,null)})}(_,n=>{var t,o;if(n)b("Unable to load library, failed to load account configuration ps-account="+_,n);else{const n=l("ps-version")||l("ps-widget-version");e.version=n||e.account.version,e.versions={widget:e.version,recipe:l("ps-recipe-version")||(null===(t=e.account.versions)||void 0===t?void 0:t.recipe)||e.version,wtb4:l("ps-wtb4-version")||(null===(o=e.account.versions)||void 0===o?void 0:o.wtb4)||e.version},P?B():U()}})):b("Unable to load library, missing or invalid ps-account meta tag")}function B(){e.version?x.forEach(n=>{const t=e.versions[n],o=c(n,t,L);g(`${$}${o}`,e=>{e?b("Failed to load library ps-version="+t,e):v("Loaded library ps-version="+t)})}):b("Unable to load library, missing or invalid library version")}function U(){if(e.account){const n=l("ps-widget-loader-check")||e.account.widgetLoaderCheck||"none";"visibility"===n?function(){let e;x.forEach(n=>{switch(n){case"widget":e=document.querySelectorAll(".ps-widget");break;case"wtb4":e=document.querySelectorAll(".ps-ng-widget")}}),j(e,void 0),window.addEventListener("load",()=>j(e,void 0),{once:!0})}():"existence"===n?function(){let e;x.forEach(n=>{switch(n){case"widget":e=document.querySelectorAll(".ps-widget");break;case"wtb4":e=document.querySelectorAll(".ps-ng-widget")}}),e.length&&B()}():B()}else A()}function j(e,n){e&&(n=new IntersectionObserver(t=>{t.forEach(t=>{t.intersectionRatio>.01&&(e.forEach(e=>{n.unobserve(e)}),n.disconnect,B())})},{threshold:.01}),e.forEach(e=>{n.observe(e)}))}A();const C=[];return e.Jsonp=S,e.LibraryLoader=m,e.accountId=_,e.debug=L,e.deferredWidgets=C,e.insertWidget=function(n){"WidgetBinder"in PriceSpider?PriceSpider.WidgetBinder.insert(n):(e.account?B():P=!0,C.push(n))},e.onload=E,e.rebind=function(){U(),"WidgetBinder"in PriceSpider&&PriceSpider.WidgetBinder.bind()},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
}